(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f36bfba"],{"82d4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"settings-page"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("my-bread",[e._v("个人设置")])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form",{attrs:{"label-width":"120px"}},[r("el-form-item",{attrs:{label:"编号："}},[e._v(e._s(e.user.id))]),r("el-form-item",{attrs:{label:"手机："}},[e._v(e._s(e.user.mobile))]),r("el-form-item",{attrs:{label:"媒体名称："}},[r("el-input",{attrs:{placeholder:"请输入媒体名称"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("el-form-item",{attrs:{label:"媒体介绍："}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入媒体介绍"},model:{value:e.user.intro,callback:function(t){e.$set(e.user,"intro",t)},expression:"user.intro"}})],1),r("el-form-item",{attrs:{label:"邮箱："}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存设置")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","http-request":e.uploadAvatar,"show-file-list":!1}},[e.user.photo?r("img",{staticClass:"avatar",attrs:{src:e.user.photo}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("p",{staticClass:"text"},[e._v("修改头像")])],1)],1)],1)],1)},s=[],n=(r("b0c0"),r("96cf"),r("1da1")),o=r("f8b7"),i={name:"SettingsPage",data:function(){return{user:{id:"",name:"",intro:"",photo:"",email:"",mobile:""}}},created:function(){this.getUserProfile()},methods:{uploadAvatar:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=new FormData,a.append("photo",e.file),r.next=5,t.$http.patch("/mp/v1_0/user/photo",a);case 5:s=r.sent,n=s.data.data,t.$message.success("修改头像成功"),t.user.photo=n.photo,o["a"].$emit("updateUserPhoto",n.photo),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),t.$message.error("修改头像失败");case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},getUserProfile:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/mp/v1_0/user/profile");case 2:r=t.sent,a=r.data.data,e.user=a;case 5:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.user,a=r.name,s=r.intro,n=r.email,t.prev=1,t.next=4,e.$http.patch("/mp/v1_0/user/profile",{name:a,intro:s,email:n});case 4:e.$message.success("保存设置成功"),o["a"].$emit("updateUserName",a),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$message.error("保存设置失败");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},l=i,u=(r("c122"),r("2877")),c=Object(u["a"])(l,a,s,!1,null,"21baf764",null);t["default"]=c.exports},b106:function(e,t,r){},c122:function(e,t,r){"use strict";r("b106")},f8b7:function(e,t,r){"use strict";var a=r("2b0e");t["a"]=new a["default"]}}]);
//# sourceMappingURL=chunk-1f36bfba.99cbd70f.js.map